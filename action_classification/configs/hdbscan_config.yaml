seed: 0  # 全局随机种子：保证 PCA/UMAP 等过程可复现
 
preprocessing:
  lstm_feature:
    pca:
      max_dims: 64  # 0=禁用；常见 32/64。适度降维可提升稳定性与速度
      explained_variance_threshold: 0.99  # 0.95–0.99。越高→维度越多、信息保留越好
      min_dims: 16  # 保底维度，避免过度压缩
    l2_normalize: true  # 与 euclidean 搭配≈余弦距离；通常建议开启
 
clustering:
  hdbscan:
    # Minimum size of clusters; a good initial rule is max(10, round(1% of N))
    min_cluster_size: 40  # 初始规则≈max(10, ~1%N)。↑更保守(噪声↑/小簇合并)，↓更宽松(簇数↑/易碎片化)
    # If not set, defaults to min_cluster_size (more conservative density)
    min_samples: 3  # None/未设≈min_cluster_size。↑更严格(噪声↑)，↓更宽松；可与 min_cluster_size 联调
    # Distance metric: 'euclidean' (recommended for L2-normalized vectors) or 'cosine'
    metric: euclidean  # L2 归一化 + euclidean 通常最佳；未归一化或方向更重要时可用 cosine
    # Cluster selection epsilon; keep 0.0 unless you know you need to split/merge
    cluster_selection_epsilon: 0.10  # 通常用 0.0；>0 促使相近簇合并/噪声↓，过大易过度合并
    # 'eom' (excess of mass) or 'leaf'; eom usually more stable
    cluster_selection_method: eom  # leaf→更细粒度(簇多)；eom→更稳定(默认)
 
visualization:
  umap:
    enabled: true  # 仅用于可视化诊断，不影响聚类结果
    n_neighbors: 15  # 10–50。越大越看全局结构，越小越看局部邻域
    min_dist: 0.1  # 0.0–0.5。越小簇更紧凑、越大更均匀
    lstm_metric: 'cosine'  # UMAP 距离度量；与 L2 归一化向量常用 cosine
    show_noise: true  # HDBSCAN 专用：是否绘制噪声(-1)
    noise:
      color: '#b0b0b0'
      alpha: 0.4
      marker_size: 8
    plot:
      figsize: [7, 6]
      marker_size: 10
      dpi: 200
